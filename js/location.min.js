jQuery((e=>{e(".user-location-wrap #location").autocomplete({source:async function(e,t){try{const o=e.term.substring(0,5),a=await fetch("https://geo.api.gouv.fr/communes?codePostal="+o+"&format=geojson&geometry=mairie"),r=await a.json();if(!r?.features?.length)throw new Error("Not a valid postcode");t(r.features.map((e=>({value:o+", "+e.properties.nom,postcode:o,code:e.properties.code,department:e.properties.codeDepartement,coordinates:e.geometry.coordinates}))))}catch(e){t([])}},search:t=>{e(".user-location-wrap #location-details").val(""),t.target.value.match(/^[0-9]{5}/g)||t.preventDefault()},select:(t,o)=>{const a=o.item;e(".user-location-wrap #location-details").val(JSON.stringify(a))}})}));